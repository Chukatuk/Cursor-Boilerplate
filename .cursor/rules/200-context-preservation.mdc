---
description: Ensures important changes are logged to disk so fresh sessions can pick up where the last one left off. Always active.
alwaysApply: true
---

# Context Preservation

LLMs lose context across sessions. This rule ensures major changes are recorded so a new session can resume without re-explanation.

## Two places to log

1. **`memory-bank/activeContext.md`** — the AI's working memory. Update the "Recently Completed" and "Notes / Decisions Made" sections after significant work.
2. **`logs/LOG_*.md`** — detailed, append-only history. One entry per major change with enough context for a future session to understand what happened.

## When to log

Log after:
- Completing a significant feature or fix
- Making architectural decisions
- Encountering and resolving a non-trivial error
- Finishing a planning or implementation session

Not every file edit needs a log entry. Use judgment — if a future session would need to know about it, log it.

## Log entry format

Keep entries short and useful. No rigid template — just include what matters:

```
## [YYYY-MM-DD] Short title

What was done, why, and any important context. Mention files changed if relevant.
```

## Log rotation

When the active log file exceeds ~5000 characters:
1. Create the next numbered file (e.g., `LOG_002.md`).
2. Add a row to `logs/LOG_INDEX.md`.
3. Never modify old log files — they are permanent history.

## Session start

At the start of every new chat session:
1. Read `memory-bank/activeContext.md` to understand current state.
2. Read `logs/LOG_INDEX.md` and the most recent log file for detailed history.
3. If files contain only placeholders, ask the user to fill in the memory bank.
4. State your understanding of the current state and ask how to proceed.

## Long sessions

If a session has been running for a while and the context window may be getting full, proactively suggest starting a fresh chat. Update `activeContext.md` and append a log entry before doing so.
